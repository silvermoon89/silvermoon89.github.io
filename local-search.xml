<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>前端开发规范</title>
    <link href="/2025/10/17/front-format/"/>
    <url>/2025/10/17/front-format/</url>
    
    <content type="html"><![CDATA[<h1 id="前端开发规范"><a href="#前端开发规范" class="headerlink" title="前端开发规范"></a>前端开发规范</h1><h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;test&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;private&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;module&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;dev&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;vite --mode development&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;lint:eslint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;eslint  --fix --ext .ts,.js,.vue ./src &quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;lint:prettier&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;prettier --write \&quot;**/*.&#123;js,cjs,ts,json,tsx,css,less,scss,vue,html,md&#125;\&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;lint:stylelint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;stylelint  \&quot;**/*.&#123;css,scss,vue&#125;\&quot; --fix&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;lint:lint-staged&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lint-staged&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;lint-staged&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;*.&#123;js,ts&#125;&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;eslint --fix&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;prettier --write&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;*.&#123;cjs,json&#125;&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;prettier --write&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;*.&#123;vue,html&#125;&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;eslint --fix&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;prettier --write&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;stylelint --fix&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;*.&#123;scss,css&#125;&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;stylelint --fix&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;prettier --write&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;*.md&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;prettier --write&quot;</span><span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;devDependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;@commitlint/cli&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^19.3.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;@commitlint/config-conventional&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^19.2.2&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;@eslint/js&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.56.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;eslint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.56.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;eslint-plugin-vue&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^9.27.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;husky&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.0.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;lint-staged&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^15.2.7&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;prettier&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.3.3&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;eslint-config-prettier&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^9.1.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;eslint-plugin-prettier&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.2.1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;stylelint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^16.9.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;stylelint-config-html&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.1.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;stylelint-config-recess-order&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.0.1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;stylelint-config-recommended-scss&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^14.1.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;stylelint-config-recommended-vue&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.5.0&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;stylelint-config-standard&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^36.0.1&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="husky"><a href="#husky" class="headerlink" title="husky"></a>husky</h2><p>需要先执行 husky install 生成 bash 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx husky install<br></code></pre></td></tr></table></figure><p>再添加两个 bash 文件</p><p>commit-msg</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/usr/bin/env sh</span><br>. <span class="hljs-string">&quot;<span class="hljs-subst">$(dirname -- <span class="hljs-string">&quot;<span class="hljs-variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span><br><br>npx --no-install commitlint --edit <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br></code></pre></td></tr></table></figure><p>pre-commit</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/usr/bin/env sh</span><br>. <span class="hljs-string">&quot;<span class="hljs-subst">$(dirname -- <span class="hljs-string">&quot;<span class="hljs-variable">$0</span>&quot;</span>)</span>/_/husky.sh&quot;</span><br><br>npm run lint:lint-staged<br></code></pre></td></tr></table></figure><h2 id="commitlint-config-cjs"><a href="#commitlint-config-cjs" class="headerlink" title="commitlint.config.cjs"></a>commitlint.config.cjs</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">extends</span>: [<span class="hljs-string">&quot;@commitlint/config-conventional&quot;</span>],<br>  <span class="hljs-comment">// 校验规则</span><br>  <span class="hljs-attr">rules</span>: &#123;<br>    <span class="hljs-string">&quot;type-enum&quot;</span>: [<br>      <span class="hljs-number">2</span>,<br>      <span class="hljs-string">&quot;always&quot;</span>,<br>      [<br>        <span class="hljs-string">&quot;feat&quot;</span>, <span class="hljs-comment">// 新增功能</span><br>        <span class="hljs-string">&quot;fix&quot;</span>, <span class="hljs-comment">// 修复缺陷</span><br>        <span class="hljs-string">&quot;docs&quot;</span>, <span class="hljs-comment">// 文档变更</span><br>        <span class="hljs-string">&quot;style&quot;</span>, <span class="hljs-comment">// 代码格式（不影响功能，例如空格、分号等格式修正）</span><br>        <span class="hljs-string">&quot;refactor&quot;</span>, <span class="hljs-comment">// 代码重构（不包括 bug 修复、功能新增）</span><br>        <span class="hljs-string">&quot;perf&quot;</span>, <span class="hljs-comment">// 性能优化</span><br>        <span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-comment">// 添加疏漏测试或已有测试改动</span><br>        <span class="hljs-string">&quot;build&quot;</span>, <span class="hljs-comment">// 构建流程、外部依赖变更（如升级 npm 包、修改 webpack 配置等）</span><br>        <span class="hljs-string">&quot;ci&quot;</span>, <span class="hljs-comment">// 修改 CI 配置、脚本</span><br>        <span class="hljs-string">&quot;revert&quot;</span>, <span class="hljs-comment">// 回滚 commit</span><br>        <span class="hljs-string">&quot;chore&quot;</span>, <span class="hljs-comment">// 对构建过程或辅助工具和库的更改（不影响源文件、测试用例）</span><br>      ],<br>    ],<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="eslintrc-cjs"><a href="#eslintrc-cjs" class="headerlink" title=".eslintrc.cjs"></a>.eslintrc.cjs</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-attr">env</span>: &#123;<br>    <span class="hljs-attr">browser</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">es2021</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">node</span>: <span class="hljs-literal">true</span>,<br>  &#125;,<br>  <span class="hljs-attr">parser</span>: <span class="hljs-string">&quot;vue-eslint-parser&quot;</span>,<br>  <span class="hljs-attr">extends</span>: [<br>    <span class="hljs-comment">// https://eslint.vuejs.org/user-guide/#usage</span><br>    <span class="hljs-string">&quot;plugin:vue/vue3-recommended&quot;</span>,<br>    <span class="hljs-string">&quot;prettier&quot;</span>,<br>    <span class="hljs-string">&quot;plugin:@typescript-eslint/recommended&quot;</span>,<br>    <span class="hljs-string">&quot;plugin:prettier/recommended&quot;</span>,<br>  ],<br>  <span class="hljs-attr">parserOptions</span>: &#123;<br>    <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-string">&quot;latest&quot;</span>,<br>    <span class="hljs-attr">sourceType</span>: <span class="hljs-string">&quot;module&quot;</span>,<br>    <span class="hljs-attr">parser</span>: <span class="hljs-string">&quot;@typescript-eslint/parser&quot;</span>,<br>    <span class="hljs-attr">project</span>: <span class="hljs-string">&quot;./tsconfig.*?.json&quot;</span>,<br>    <span class="hljs-attr">createDefaultProgram</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">extraFileExtensions</span>: [<span class="hljs-string">&quot;.vue&quot;</span>],<br>  &#125;,<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-string">&quot;vue&quot;</span>, <span class="hljs-string">&quot;@typescript-eslint&quot;</span>],<br>  <span class="hljs-attr">rules</span>: &#123;<br>    <span class="hljs-comment">// https://eslint.vuejs.org/rules/#priority-a-essential-error-prevention</span><br>    <span class="hljs-string">&quot;vue/multi-word-component-names&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/no-v-model-argument&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/script-setup-uses-vars&quot;</span>: <span class="hljs-string">&quot;error&quot;</span>,<br>    <span class="hljs-string">&quot;vue/no-reserved-component-names&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/custom-event-name-casing&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/attributes-order&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/one-component-per-file&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/html-closing-bracket-newline&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/max-attributes-per-line&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/multiline-html-element-content-newline&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/singleline-html-element-content-newline&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/attribute-hyphenation&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/require-default-prop&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/require-explicit-emits&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;vue/html-self-closing&quot;</span>: [<br>      <span class="hljs-string">&quot;error&quot;</span>,<br>      &#123;<br>        <span class="hljs-attr">html</span>: &#123;<br>          <span class="hljs-attr">void</span>: <span class="hljs-string">&quot;always&quot;</span>,<br>          <span class="hljs-attr">normal</span>: <span class="hljs-string">&quot;never&quot;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-string">&quot;always&quot;</span>,<br>        &#125;,<br>        <span class="hljs-attr">svg</span>: <span class="hljs-string">&quot;always&quot;</span>,<br>        <span class="hljs-attr">math</span>: <span class="hljs-string">&quot;always&quot;</span>,<br>      &#125;,<br>    ],<br><br>    <span class="hljs-string">&quot;@typescript-eslint/no-empty-function&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>, <span class="hljs-comment">// 关闭空方法检查</span><br>    <span class="hljs-string">&quot;@typescript-eslint/no-explicit-any&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>, <span class="hljs-comment">// 关闭any类型的警告</span><br>    <span class="hljs-string">&quot;@typescript-eslint/no-non-null-assertion&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/ban-ts-ignore&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/ban-ts-comment&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/ban-types&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/explicit-function-return-type&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/no-explicit-any&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/no-var-requires&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/no-empty-function&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/no-use-before-define&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/no-non-null-assertion&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/explicit-module-boundary-types&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br>    <span class="hljs-string">&quot;@typescript-eslint/no-unused-vars&quot;</span>: <span class="hljs-string">&quot;off&quot;</span>,<br><br>    <span class="hljs-string">&quot;prettier/prettier&quot;</span>: [<br>      <span class="hljs-string">&quot;error&quot;</span>,<br>      &#123;<br>        <span class="hljs-attr">useTabs</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// 不使用制表符</span><br>      &#125;,<br>    ],<br>  &#125;,<br>  <span class="hljs-comment">// eslint不能对html文件生效</span><br>  <span class="hljs-attr">overrides</span>: [<br>    &#123;<br>      <span class="hljs-attr">files</span>: [<span class="hljs-string">&quot;*.html&quot;</span>],<br>      <span class="hljs-attr">processor</span>: <span class="hljs-string">&quot;vue/.vue&quot;</span>,<br>    &#125;,<br>  ],<br>  <span class="hljs-comment">// https://eslint.org/docs/latest/use/configure/language-options#specifying-globals</span><br>  <span class="hljs-attr">globals</span>: &#123;<br>    <span class="hljs-title class_">OptionType</span>: <span class="hljs-string">&quot;readonly&quot;</span>,<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="eslintignore"><a href="#eslintignore" class="headerlink" title=".eslintignore"></a>.eslintignore</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs text">dist<br>build<br>node_modules<br>public<br>.husky<br>.vscode<br>.idea<br>*.sh<br>*.md<br><br>src/assets<br>index.html<br><br>.eslintrc.cjs<br>.prettierrc.cjs<br>.stylelintrc.cjs<br></code></pre></td></tr></table></figure><h2 id="prettierrc-cjs"><a href="#prettierrc-cjs" class="headerlink" title=".prettierrc.cjs"></a>.prettierrc.cjs</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-comment">// (x)=&gt;&#123;&#125;,单个参数箭头函数是否显示小括号。(always:始终显示;avoid:省略括号。默认:always)</span><br>  <span class="hljs-attr">arrowParens</span>: <span class="hljs-string">&quot;avoid&quot;</span>,<br>  <span class="hljs-comment">// 开始标签的右尖括号是否跟随在最后一行属性末尾，默认false</span><br>  <span class="hljs-attr">bracketSameLine</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">// 对象字面量的括号之间打印空格 (true - Example: &#123; foo: bar &#125; ; false - Example: &#123;foo:bar&#125;)</span><br>  <span class="hljs-attr">bracketSpacing</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-comment">// 是否格式化一些文件中被嵌入的代码片段的风格(auto|off;默认auto)</span><br>  <span class="hljs-attr">embeddedLanguageFormatting</span>: <span class="hljs-string">&quot;auto&quot;</span>,<br>  <span class="hljs-comment">// 指定 HTML 文件的空格敏感度 (css|strict|ignore;默认css)</span><br>  <span class="hljs-attr">htmlWhitespaceSensitivity</span>: <span class="hljs-string">&quot;ignore&quot;</span>,<br>  <span class="hljs-comment">// 当文件已经被 Prettier 格式化之后，是否会在文件顶部插入一个特殊的 @format 标记，默认false</span><br>  <span class="hljs-attr">insertPragma</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">// 在 JSX 中使用单引号替代双引号，默认false</span><br>  <span class="hljs-attr">jsxSingleQuote</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">// 每行最多字符数量，超出换行(默认80)</span><br>  <span class="hljs-attr">printWidth</span>: <span class="hljs-number">100</span>,<br>  <span class="hljs-comment">// 超出打印宽度 (always | never | preserve )</span><br>  <span class="hljs-attr">proseWrap</span>: <span class="hljs-string">&quot;preserve&quot;</span>,<br>  <span class="hljs-comment">// 对象属性是否使用引号(as-needed | consistent | preserve;默认as-needed:对象的属性需要加引号才添加;)</span><br>  <span class="hljs-attr">quoteProps</span>: <span class="hljs-string">&quot;as-needed&quot;</span>,<br>  <span class="hljs-comment">// 是否只格式化在文件顶部包含特定注释(@prettier| @format)的文件，默认false</span><br>  <span class="hljs-attr">requirePragma</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">// 结尾添加分号</span><br>  <span class="hljs-attr">semi</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">// 使用单引号 (true:单引号;false:双引号)</span><br>  <span class="hljs-attr">singleQuote</span>: <span class="hljs-literal">true</span>,<br>  <span class="hljs-comment">// 缩进空格数，默认2个空格</span><br>  <span class="hljs-attr">tabWidth</span>: <span class="hljs-number">2</span>,<br>  <span class="hljs-comment">// 元素末尾是否加逗号，默认es5: ES5中的 objects, arrays 等会添加逗号，TypeScript 中的 type 后不加逗号</span><br>  <span class="hljs-attr">trailingComma</span>: <span class="hljs-string">&quot;none&quot;</span>,<br>  <span class="hljs-comment">// 指定缩进方式，空格或tab，默认false，即使用空格</span><br>  <span class="hljs-attr">useTabs</span>: <span class="hljs-literal">false</span>,<br>  <span class="hljs-comment">// vue 文件中是否缩进 &lt;style&gt; 和 &lt;script&gt; 标签，默认 false</span><br>  <span class="hljs-attr">vueIndentScriptAndStyle</span>: <span class="hljs-literal">false</span>,<br><br>  <span class="hljs-attr">endOfLine</span>: <span class="hljs-string">&quot;auto&quot;</span>,<br>  <span class="hljs-attr">overrides</span>: [<br>    &#123;<br>      <span class="hljs-attr">files</span>: <span class="hljs-string">&quot;*.html&quot;</span>,<br>      <span class="hljs-attr">options</span>: &#123;<br>        <span class="hljs-attr">parser</span>: <span class="hljs-string">&quot;html&quot;</span>,<br>      &#125;,<br>    &#125;,<br>  ],<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="prettierignore"><a href="#prettierignore" class="headerlink" title=".prettierignore"></a>.prettierignore</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs text">dist<br>build<br>node_modules<br>public<br>.husky<br>.vscode<br>.idea<br>*.sh<br>*.md<br><br>src/assets<br>index.html<br></code></pre></td></tr></table></figure><h2 id="stylelintrc-cjs"><a href="#stylelintrc-cjs" class="headerlink" title=".stylelintrc.cjs"></a>.stylelintrc.cjs</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-comment">// 继承推荐规范配置</span><br>  <span class="hljs-attr">extends</span>: [<br>    <span class="hljs-string">&quot;stylelint-config-standard&quot;</span>,<br>    <span class="hljs-string">&quot;stylelint-config-recommended-vue/scss&quot;</span>,<br>    <span class="hljs-string">&quot;stylelint-config-html/vue&quot;</span>,<br>    <span class="hljs-string">&quot;stylelint-config-recess-order&quot;</span>,<br>    <span class="hljs-string">&quot;stylelint-config-recommended-scss&quot;</span>,<br>  ],<br>  <span class="hljs-comment">// 指定不同文件对应的解析器</span><br>  <span class="hljs-attr">overrides</span>: [<br>    &#123;<br>      <span class="hljs-attr">files</span>: [<span class="hljs-string">&quot;**/*.&#123;vue,html&#125;&quot;</span>],<br>      <span class="hljs-attr">customSyntax</span>: <span class="hljs-string">&quot;postcss-html&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">files</span>: [<span class="hljs-string">&quot;**/*.&#123;css,scss&#125;&quot;</span>],<br>      <span class="hljs-attr">customSyntax</span>: <span class="hljs-string">&quot;postcss-scss&quot;</span>,<br>    &#125;,<br>  ],<br>  <span class="hljs-comment">// 自定义规则</span><br>  <span class="hljs-attr">rules</span>: &#123;<br>    <span class="hljs-string">&quot;import-notation&quot;</span>: <span class="hljs-string">&quot;string&quot;</span>, <span class="hljs-comment">// 指定导入CSS文件的方式(&quot;string&quot;|&quot;url&quot;)</span><br>    <span class="hljs-string">&quot;selector-class-pattern&quot;</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// 选择器类名命名规则</span><br>    <span class="hljs-string">&quot;custom-property-pattern&quot;</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// 自定义属性命名规则</span><br>    <span class="hljs-string">&quot;keyframes-name-pattern&quot;</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// 动画帧节点样式命名规则</span><br>    <span class="hljs-string">&quot;no-descending-specificity&quot;</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// 允许无降序特异性</span><br>    <span class="hljs-string">&quot;no-empty-source&quot;</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// 允许空样式</span><br>    <span class="hljs-string">&quot;block-no-empty&quot;</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// 允许空块</span><br>    <span class="hljs-string">&quot;number-max-precision&quot;</span>: <span class="hljs-number">5</span>,<br>    <span class="hljs-comment">// 允许 global 、export 、deep伪类</span><br>    <span class="hljs-string">&quot;selector-pseudo-class-no-unknown&quot;</span>: [<br>      <span class="hljs-literal">true</span>,<br>      &#123;<br>        <span class="hljs-attr">ignorePseudoClasses</span>: [<span class="hljs-string">&quot;global&quot;</span>, <span class="hljs-string">&quot;export&quot;</span>, <span class="hljs-string">&quot;deep&quot;</span>, <span class="hljs-string">&quot;v-deep&quot;</span>],<br>      &#125;,<br>    ],<br>    <span class="hljs-comment">// 允许未知属性</span><br>    <span class="hljs-string">&quot;property-no-unknown&quot;</span>: [<br>      <span class="hljs-literal">true</span>,<br>      &#123;<br>        <span class="hljs-attr">ignoreProperties</span>: [],<br>      &#125;,<br>    ],<br>    <span class="hljs-comment">// 允许未知规则</span><br>    <span class="hljs-string">&quot;at-rule-no-unknown&quot;</span>: [<br>      <span class="hljs-literal">true</span>,<br>      &#123;<br>        <span class="hljs-attr">ignoreAtRules</span>: [<span class="hljs-string">&quot;apply&quot;</span>, <span class="hljs-string">&quot;use&quot;</span>, <span class="hljs-string">&quot;mixin&quot;</span>, <span class="hljs-string">&quot;include&quot;</span>, <span class="hljs-string">&quot;extend&quot;</span>],<br>      &#125;,<br>    ],<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="stylelintignore"><a href="#stylelintignore" class="headerlink" title=".stylelintignore"></a>.stylelintignore</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs text">dist<br>build<br>node_modules<br>public<br>.husky<br>.vscode<br>.idea<br>*.sh<br>*.md<br><br>src/assets<br>index.html<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>开发规范</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>纯前端导出水印文件</title>
    <link href="/2025/10/17/front-export/"/>
    <url>/2025/10/17/front-export/</url>
    
    <content type="html"><![CDATA[<h1 id="纯前端导出水印文件"><a href="#纯前端导出水印文件" class="headerlink" title="纯前端导出水印文件"></a>纯前端导出水印文件</h1><h2 id="1、安装依赖"><a href="#1、安装依赖" class="headerlink" title="1、安装依赖"></a>1、安装依赖</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install exceljs file-saver html2canvas jspdf<br></code></pre></td></tr></table></figure><h2 id="2、导出方法"><a href="#2、导出方法" class="headerlink" title="2、导出方法"></a>2、导出方法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// 可导出图片，Excel文件</span><br><span class="hljs-keyword">import</span> htmlTocanvas <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;html2canvas&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ExcelJS</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;exceljs&quot;</span>;<br><span class="hljs-keyword">import</span> jsPDF <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;jspdf&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; saveAs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;file-saver&quot;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ExportUtil</span> = &#123;<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * Generates a function comment for the given function body in a markdown code block with the correct language syntax.</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Object</span>&#125; <span class="hljs-variable">options</span> - An object containing the function parameters.</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; options.name - The name of the export.</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Array</span>&#125; options.data - The data to be exported.</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Array</span>&#125; options.columns - The columns to be included in the export.</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; options.waterText - The watermark text to be added to the export.</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-type">undefined</span>&#125; This function does not return a value.</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-title function_">exportExcel</span>(<span class="hljs-params">&#123;</span><br><span class="hljs-params">    name = <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()&#125;</span>`</span>,</span><br><span class="hljs-params">    data = [],</span><br><span class="hljs-params">    columns = [],</span><br><span class="hljs-params">    mergeColumns = [],</span><br><span class="hljs-params">    waterText = <span class="hljs-literal">true</span>,</span><br><span class="hljs-params">  &#125;</span>) &#123;<br>    <span class="hljs-keyword">const</span> workbook = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExcelJS</span>.<span class="hljs-title class_">Workbook</span>();<br>    <span class="hljs-keyword">const</span> worksheet = workbook.<span class="hljs-title function_">addWorksheet</span>(<span class="hljs-string">&quot;sheet1&quot;</span>);<br>    <span class="hljs-keyword">if</span> (waterText) &#123;<br>      <span class="hljs-keyword">const</span> defaultText = <span class="hljs-string">&quot;测试水印&quot;</span>;<br>      waterText = <span class="hljs-keyword">typeof</span> waterText === <span class="hljs-string">&quot;string&quot;</span> ? waterText : defaultText;<br>      <span class="hljs-keyword">const</span> base64Img = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWatermark</span>(waterText);<br>      <span class="hljs-keyword">const</span> img = workbook.<span class="hljs-title function_">addImage</span>(&#123;<br>        <span class="hljs-attr">base64</span>: base64Img,<br>        <span class="hljs-attr">extension</span>: <span class="hljs-string">&quot;png&quot;</span>,<br>      &#125;);<br>      worksheet.<span class="hljs-title function_">addBackgroundImage</span>(img);<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (columns &amp;&amp; columns.<span class="hljs-property">length</span>) &#123;<br>      <span class="hljs-comment">// 设置列头</span><br>      <span class="hljs-keyword">const</span> columnsData = columns.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">column</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>          <span class="hljs-attr">header</span>: column.<span class="hljs-property">title</span>,<br>          <span class="hljs-attr">key</span>: column.<span class="hljs-property">dataIndex</span> || column.<span class="hljs-property">field</span>,<br>          <span class="hljs-attr">style</span>: &#123;<br>            <span class="hljs-attr">alignment</span>: &#123; <span class="hljs-attr">horizontal</span>: <span class="hljs-string">&quot;center&quot;</span>, <span class="hljs-attr">vertical</span>: <span class="hljs-string">&quot;middle&quot;</span> &#125;,<br>          &#125;,<br>          <span class="hljs-attr">width</span>: <span class="hljs-number">20</span>,<br>        &#125;;<br>      &#125;);<br>      worksheet.<span class="hljs-property">columns</span> = columnsData;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (mergeColumns &amp;&amp; mergeColumns.<span class="hljs-property">length</span>) &#123;<br>      <span class="hljs-comment">// 设置合并的表头</span><br>      mergeColumns.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>        <span class="hljs-keyword">const</span> start = item.<span class="hljs-property">mergeCells</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;:&quot;</span>)[<span class="hljs-number">0</span>];<br>        worksheet.<span class="hljs-title function_">mergeCells</span>(item.<span class="hljs-property">mergeCells</span>);<br>        worksheet.<span class="hljs-title function_">getCell</span>(start).<span class="hljs-property">value</span> = item.<span class="hljs-property">value</span>;<br>        worksheet.<span class="hljs-title function_">getCell</span>(start).<span class="hljs-property">alignment</span> = &#123;<br>          <span class="hljs-attr">horizontal</span>: <span class="hljs-string">&quot;center&quot;</span>,<br>          <span class="hljs-attr">vertical</span>: <span class="hljs-string">&quot;middle&quot;</span>,<br>        &#125;;<br>        worksheet.<span class="hljs-title function_">getCell</span>(start).<span class="hljs-property">font</span> = &#123; <span class="hljs-attr">bold</span>: <span class="hljs-literal">true</span> &#125;;<br>      &#125;);<br>    &#125;<br><br>    <span class="hljs-comment">// 将 JSON 数据转换为工作表的行</span><br>    worksheet.<span class="hljs-title function_">addRows</span>(data);<br>    workbook.<span class="hljs-property">xlsx</span>.<span class="hljs-title function_">writeBuffer</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> &#123;<br>      <span class="hljs-title function_">saveAs</span>(<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([res], &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;application/octet-stream&quot;</span> &#125;),<br>        name.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;.xlsx&quot;</span>) ? name : <span class="hljs-string">`<span class="hljs-subst">$&#123;name&#125;</span>.xlsx`</span><br>      );<br>    &#125;);<br>  &#125;,<br>  <span class="hljs-title function_">exportPDF</span>(<span class="hljs-params">&#123; element, fileName, config = &#123;&#125;, waterText = <span class="hljs-literal">true</span> &#125;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      <span class="hljs-title function_">htmlTocanvas</span>(element, &#123;<br>        <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&quot;#f7f7f8&quot;</span>,<br>        ...config,<br>      &#125;)<br>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">canvas</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">let</span> base64Img;<br>          <span class="hljs-keyword">if</span> (waterText) &#123;<br>            <span class="hljs-keyword">const</span> userInfo = store.<span class="hljs-property">getters</span>.<span class="hljs-property">userInfo</span>;<br>            <span class="hljs-keyword">const</span> defaultText = <span class="hljs-string">&quot;测试水印&quot;</span>;<br>            waterText = <span class="hljs-keyword">typeof</span> waterText === <span class="hljs-string">&quot;string&quot;</span> ? waterText : defaultText;<br>            base64Img = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWatermark</span>(waterText, canvas);<br>          &#125;<br>          <span class="hljs-keyword">const</span> imgData = base64Img || canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">&quot;image/png&quot;</span>);<br>          <span class="hljs-keyword">const</span> pdf = <span class="hljs-keyword">new</span> <span class="hljs-title function_">jsPDF</span>(<span class="hljs-string">&quot;p&quot;</span>, <span class="hljs-string">&quot;pt&quot;</span>, <span class="hljs-string">&quot;a4&quot;</span>);<br>          <span class="hljs-comment">// 获取PDF页面的宽度和高度</span><br>          <span class="hljs-keyword">const</span> pdfWidth = pdf.<span class="hljs-property">internal</span>.<span class="hljs-property">pageSize</span>.<span class="hljs-title function_">getWidth</span>();<br>          <span class="hljs-keyword">const</span> pdfHeight = pdf.<span class="hljs-property">internal</span>.<span class="hljs-property">pageSize</span>.<span class="hljs-title function_">getHeight</span>();<br>          <span class="hljs-comment">// 计算图像的缩放比例，使其铺满整个PDF页面</span><br>          <span class="hljs-keyword">const</span> imgWidth = pdfWidth;<br>          <span class="hljs-keyword">const</span> imgHeight = (imgWidth * pdfHeight) / pdfWidth;<br>          pdf.<span class="hljs-title function_">addImage</span>(imgData, <span class="hljs-string">&quot;PNG&quot;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, imgWidth, imgHeight);<br>          pdf.<span class="hljs-title function_">save</span>(fileName.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;.pdf&quot;</span>) ? fileName : <span class="hljs-string">`<span class="hljs-subst">$&#123;fileName&#125;</span>.pdf`</span>);<br>          <span class="hljs-title function_">resolve</span>();<br>        &#125;)<br>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>          <span class="hljs-title function_">reject</span>(err);<br>        &#125;);<br>    &#125;);<br>  &#125;,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * Takes an HTML element and converts it to a canvas image, optionally adding a watermark text.</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">object</span>&#125; <span class="hljs-variable">options</span> - An object containing the following properties:</span><br><span class="hljs-comment">   *   <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">HTMLElement</span>&#125; options.element - The HTML element to convert to canvas.</span><br><span class="hljs-comment">   *   <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; options.fileName - The name of the file to be downloaded.</span><br><span class="hljs-comment">   *   <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">object</span>&#125; [options.config=&#123;&#125;] - Additional configuration options for the HTML to canvas conversion.</span><br><span class="hljs-comment">   *   <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">boolean</span>&#125; [options.waterText=true] - Whether to add a watermark text to the image.</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-type">Promise</span>&#125; A Promise that resolves when the image is downloaded.</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-title function_">exportImg</span>(<span class="hljs-params">&#123; element, fileName, config = &#123;&#125;, waterText = <span class="hljs-literal">true</span> &#125;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>      <span class="hljs-title function_">htmlTocanvas</span>(element, &#123;<br>        <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&quot;#f7f7f8&quot;</span>,<br>        ...config,<br>      &#125;)<br>        .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">canvas</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">let</span> base64Img;<br>          <span class="hljs-keyword">if</span> (waterText) &#123;<br>            <span class="hljs-keyword">const</span> defaultText = <span class="hljs-string">&quot;测试水印&quot;</span>;<br>            waterText = <span class="hljs-keyword">typeof</span> waterText === <span class="hljs-string">&quot;string&quot;</span> ? waterText : defaultText;<br>            base64Img = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWatermark</span>(waterText, canvas);<br>          &#125;<br>          <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;a&quot;</span>);<br>          link.<span class="hljs-property">download</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;fileName || <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()&#125;</span>.png`</span>;<br>          link.<span class="hljs-property">href</span> = base64Img || canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">&quot;image/png&quot;</span>);<br>          link.<span class="hljs-title function_">click</span>();<br>          <span class="hljs-title function_">resolve</span>();<br>        &#125;)<br>        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;<br>          <span class="hljs-title function_">reject</span>(err);<br>        &#125;);<br>    &#125;);<br>  &#125;,<br>  <span class="hljs-comment">/**</span><br><span class="hljs-comment">   * Sets a watermark on a canvas.</span><br><span class="hljs-comment">   * 如果是导出图片的话，必传canvas，导出excel的时候不需要传</span><br><span class="hljs-comment">   *</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">string</span>&#125; <span class="hljs-variable">str</span> - The text of the watermark.</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">HTMLCanvasElement</span>&#125; <span class="hljs-variable">canvas</span> - The canvas element to place the watermark on. If not provided, a new canvas will be created.</span><br><span class="hljs-comment">   * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-type">string</span>&#125; - The data URL of the canvas with the watermark.</span><br><span class="hljs-comment">   */</span><br>  <span class="hljs-title function_">setWatermark</span>(<span class="hljs-params">str, canvas</span>) &#123;<br>    <span class="hljs-comment">// 创建一个画布</span><br>    <span class="hljs-keyword">let</span> can = canvas || <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;canvas&quot;</span>);<br>    <span class="hljs-keyword">if</span> (!canvas) &#123;<br>      <span class="hljs-comment">// 设置画布的长宽</span><br>      can.<span class="hljs-property">width</span> = <span class="hljs-number">500</span>;<br>      can.<span class="hljs-property">height</span> = <span class="hljs-number">400</span>;<br>    &#125;<br>    <span class="hljs-keyword">let</span> ctx = can.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&quot;2d&quot;</span>);<br>    ctx.<span class="hljs-property">font</span> = <span class="hljs-string">&quot;18px Vedana&quot;</span>;<br>    <span class="hljs-comment">// 设置填充绘画的颜色、渐变或者模式</span><br>    ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">&quot;rgba(130, 142, 162, 0.5)&quot;</span>;<br>    <span class="hljs-comment">// 旋转角度</span><br>    ctx.<span class="hljs-title function_">rotate</span>((-<span class="hljs-number">60</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>) / <span class="hljs-number">220</span>);<br>    <span class="hljs-comment">// 设置文本内容的当前对齐方式</span><br>    ctx.<span class="hljs-property">textAlign</span> = <span class="hljs-string">&quot;left&quot;</span>;<br>    <span class="hljs-comment">// 设置在绘制文本时使用的当前文本基线</span><br>    ctx.<span class="hljs-property">textBaseline</span> = <span class="hljs-string">&quot;Middle&quot;</span>;<br><br>    <span class="hljs-keyword">if</span> (canvas) &#123;<br>      <span class="hljs-comment">// 定义水印的间隔和偏移量</span><br>      <span class="hljs-keyword">const</span> xOffset = -can.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>; <span class="hljs-comment">// X轴偏移量</span><br>      <span class="hljs-keyword">const</span> yOffset = -can.<span class="hljs-property">height</span> / <span class="hljs-number">2</span>; <span class="hljs-comment">// Y轴偏移量</span><br><br>      <span class="hljs-comment">// 循环绘制水印文本</span><br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>; x &lt; can.<span class="hljs-property">width</span> * <span class="hljs-number">1.5</span>; x += <span class="hljs-number">400</span>) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> y = <span class="hljs-number">0</span>; y &lt; can.<span class="hljs-property">height</span> * <span class="hljs-number">1.5</span>; y += <span class="hljs-number">300</span>) &#123;<br>          ctx.<span class="hljs-title function_">fillText</span>(str, x + xOffset, y + yOffset);<br>        &#125;<br>      &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">let</span> initY = can.<span class="hljs-property">height</span>;<br>      ctx.<span class="hljs-title function_">fillText</span>(str, <span class="hljs-number">0</span>, initY);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> can.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">&quot;image/png&quot;</span>);<br>  &#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="3、使用"><a href="#3、使用" class="headerlink" title="3、使用"></a>3、使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ExportUtil</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;xxx&quot;</span>;<br><br><span class="hljs-title class_">ExportUtil</span>.<span class="hljs-title function_">exportExcel</span>(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;导出文件&quot;</span>,<br>  <span class="hljs-attr">columns</span>: [&#123; <span class="hljs-attr">field</span>: test, <span class="hljs-attr">title</span>: 测试头 &#125;],<br>  <span class="hljs-attr">data</span>: [&#123; <span class="hljs-attr">test</span>: <span class="hljs-number">23</span> &#125;],<br>&#125;);<br><span class="hljs-title class_">ExportUtil</span>.<span class="hljs-title function_">exportPDF</span>(&#123; <span class="hljs-attr">element</span>: element, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;导出PDF&quot;</span> &#125;);<br><span class="hljs-title class_">ExportUtil</span>.<span class="hljs-title function_">exportImg</span>(&#123; <span class="hljs-attr">element</span>: element, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;导出图片&quot;</span> &#125;);<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>前端</category>
      
    </categories>
    
    
    <tags>
      
      <tag>前端</tag>
      
      <tag>导出水印</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cloudflare白嫖大全</title>
    <link href="/2025/10/17/cloudflare/"/>
    <url>/2025/10/17/cloudflare/</url>
    
    <content type="html"><![CDATA[<h1 id="免责声明：以下所有内容仅供学习，禁止用于非法用途，后果自负。"><a href="#免责声明：以下所有内容仅供学习，禁止用于非法用途，后果自负。" class="headerlink" title="免责声明：以下所有内容仅供学习，禁止用于非法用途，后果自负。"></a>免责声明：以下所有内容仅供学习，禁止用于非法用途，后果自负。</h1><h1 id="cloudflare"><a href="#cloudflare" class="headerlink" title="cloudflare"></a>cloudflare</h1><p>Cloudflare 白嫖大全，只提供大致操作及思路，具体操作请自行 google</p><p>准备工作：</p><p>注册账号：<a href="https://dash.cloudflare.com/">cloudflare</a>：邮箱注册</p><p>域名注册：<a href="https://www.namesilo.com/">namesilo</a>：新用户有 1 美元优惠券，首年 7 元左右</p><h2 id="使用工具或地址"><a href="#使用工具或地址" class="headerlink" title="使用工具或地址"></a>使用工具或地址</h2><p><a href="https://github.com/233boy/v2ray/tags">v2ray</a> <a href="https://github.com/2dust/v2rayN/tags">v2rayN</a></p><p>优选工具：<a href="https://github.com/XIU2/CloudflareSpeedTest/releases">地址 1</a> <a href="https://github.com/badafans/better-cloudflare-ip/releases">地址 2</a></p><h2 id="cloudflare-域名加速，内网穿透"><a href="#cloudflare-域名加速，内网穿透" class="headerlink" title="cloudflare 域名加速，内网穿透"></a>cloudflare 域名加速，内网穿透</h2><p>1、进入首页，绑定添加域名，选择免费计划，继续</p><p>2、dns 扫描完成之后，点击继续激活，然后按要求将为你分配的 Cloudflare 服务器在域名服务商那里添加到 NameServers</p><p>3、完成之后返回 cloudflare 首页域名就会变成激活状态（可能需要一定时间），cloudflare 会为你免费抵挡 ddos 攻击，以及加速等</p><p>4、激活完成之后，如果你有固定公网 ip 即可在 dns 解析中添加解析，之后便可通过公网访问本地服务，如果是动态公网 ip 可使用 dns-go 等动态服务插件或其他动态服务商进行动态解析</p><p>5、如果没有公网 ip，可进入首页，然后选择 Zero Trust，进入 Network，Tunnels 创建隧道进行内网穿透，创建选择 Cloudflared，然后按照指引安装软件，执行命令，完成隧道绑定</p><h2 id="cloudflare-永久免费科学上网"><a href="#cloudflare-永久免费科学上网" class="headerlink" title="cloudflare 永久免费科学上网"></a>cloudflare 永久免费科学上网</h2><p>1、进入首页，选择 Wokers 和 Pages，创建 works，随便取名，然后部署</p><p>2、进入刚才创建的 works，点击编辑代码，复制里面的<a href="https://raw.githubusercontent.com/zizifn/edgetunnel/main/src/worker-vless.js">代码</a>，粘贴，保存，部署</p><p>3、works 点击进入设置，添加变量，第一个：UUID，<a href="https://1024tools.com/uuid/">此处生成</a>，随便复制一个添加，第二个变量：PROXYIP，值：workers.cloudflare.cyou，也可使用优选 IP 工具筛选出的 IP</p><p>4、变量添加完成后，便可在“域和路由”，复制路由地址后面加上你刚才添加的 UUID，在浏览器访问，便会返回一个 vless 订阅地址，在 v2ray 中添加服务器，然后开启设置，Core:基础设置，修下面的分片设置，再修改添加的 vless 服务 ip 地址，可选</p><p>bestcf.onecf.eu.org</p><p>104.19.62.86</p><p>acsg3.cloudflarest.link</p><p>节点可选 443 端口，将节点地址换成优选域名，删除 SNI；或者端口 2082，关闭 TLS。</p><p>443 端口节点需启用分片。</p><p>也可使用优选 IP，若网络不好，则可切换 IP</p><p>5、优选 IP，下载优选工具，运行后可筛选出速度较好的 IP 地址，tips：优选 IP 的时候一定要先关闭代理</p><p>至此，已经可以科学上网，且可解锁 Netflix，推荐平时看 Youtube 或者追剧的时候可以使用</p><h2 id="自建订阅转换"><a href="#自建订阅转换" class="headerlink" title="自建订阅转换"></a>自建订阅转换</h2><p>原文：<a href="https://github.com/bulianglin/psub">https://github.com/bulianglin/psub</a></p><p>原理：订阅转换服务器还是使用别人提供的，只是在转换之前先走一遍自建的 cloudflare 服务，将服务器地址，账户密码等全部随机修改为假数据，在订阅服务器转换完成之后在修改回来，此方法可减小订阅泄露风险</p><p>遇到问题：使用别人订阅转换服务时，可能会遇到 526，SSL 协议无效，这是因为订阅转换的服务器地址没有有效的 SSL 证书，切换订阅转换服务器即可</p><p>1、进入 cloudflare，创建 works，部署</p><p>2、进入 works，编辑代码：复制<a href="https://github.com/silvermoon89/psub/blob/main/worker.js">代码</a>，粘贴，保存，部署</p><p>3、works 设置变量，BACKEND，此变量即为订阅转换的服务器，下面提供一些，有的可能不支持 vless，hysteria 协议转换，这个是后端服务决定的，可以找支持的后端服务</p><p><a href="https://sub.id9.cc/">https://sub.id9.cc</a> 品云提供</p><p><a href="https://sub.xeton.dev/">https://sub.xeton.dev</a> subconventer 作者提供</p><p><a href="https://api.dler.io/">https://api.dler.io</a> lhie1 提供</p><p>4、添加 KV 命名空间，名称随意，然后绑定 KV 命名空间，变量名为 SUB_BUCKET，此时便可使用路由中的地址访问订阅转换页面</p><h5 id="其他可选配置："><a href="#其他可选配置：" class="headerlink" title="其他可选配置："></a>其他可选配置：</h5><p>5、绑定自己域名，使用域名访问订阅转换页面</p><p>如果你有自己的域名且已经在 cloudflare 激活，你就可以在 works 中添加一个新的路由，例如 sub.example.top&#x2F;*，之后再 cloudflare 域名管理中设置 dns 解析，将你设置的子域名随便解析到一个 dns，例如 8.8.8.8，此时你就可以使用当前子域名访问订阅转换页面</p><p>6、选择自定义订阅转换规则</p><p>再前面的 works 代码中，有一个变量：const frontendUrl &#x3D; ‘<a href="https://raw.githubusercontent.com/bulianglin/psub/main/frontend.html">https://raw.githubusercontent.com/bulianglin/psub/main/frontend.html</a>‘; 这里便是前端页面地址，你可以将文件上传到自己 github 仓库，找到 label:”universal”，再这里添加自己的订阅转换文件地址，便可使用自定义策略及规则，当然你也可以直接复制地址在 web 页面粘贴使用</p><h2 id="万物皆可代（不是）"><a href="#万物皆可代（不是）" class="headerlink" title="万物皆可代（不是）"></a>万物皆可代（不是）</h2><p>原理：使用 cloudflare 的 workers 功能，将目标网站使用 cloudflare 访问解析，再返回浏览器。</p><p>提示：并不是真的所有地址都能代理，有些网站有比较严格的校验无法实现代理，且代理后请勿登录相关账号，如比 github 账号等，如造成封号等情况，后果自负。请勿滥用！！！</p><p>1、cloudflare 创建 workers，编辑代码，复制粘贴以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;fetch&quot;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> &#123;<br>  event.<span class="hljs-title function_">respondWith</span>(<span class="hljs-title function_">handleRequest</span>(event.<span class="hljs-property">request</span>));<br>&#125;);<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">request</span>) &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(request.<span class="hljs-property">url</span>);<br><br>    <span class="hljs-comment">// 如果访问根目录，返回HTML</span><br>    <span class="hljs-keyword">if</span> (url.<span class="hljs-property">pathname</span> === <span class="hljs-string">&quot;/&quot;</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title function_">getRootHtml</span>(), &#123;<br>        <span class="hljs-attr">headers</span>: &#123;<br>          <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;text/html; charset=utf-8&quot;</span>,<br>        &#125;,<br>      &#125;);<br>    &#125;<br><br>    <span class="hljs-comment">// 从请求路径中提取目标 URL</span><br>    <span class="hljs-keyword">let</span> actualUrlStr = <span class="hljs-built_in">decodeURIComponent</span>(url.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-string">&quot;&quot;</span>));<br><br>    <span class="hljs-comment">// 判断用户输入的 URL 是否带有协议</span><br>    actualUrlStr = <span class="hljs-title function_">ensureProtocol</span>(actualUrlStr, url.<span class="hljs-property">protocol</span>);<br><br>    <span class="hljs-comment">// 保留查询参数</span><br>    actualUrlStr += url.<span class="hljs-property">search</span>;<br><br>    <span class="hljs-comment">// 创建新 Headers 对象，排除以 &#x27;cf-&#x27; 开头的请求头</span><br>    <span class="hljs-keyword">const</span> newHeaders = <span class="hljs-title function_">filterHeaders</span>(<br>      request.<span class="hljs-property">headers</span>,<br>      <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> !name.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;cf-&quot;</span>)<br>    );<br><br>    <span class="hljs-comment">// 创建一个新的请求以访问目标 URL</span><br>    <span class="hljs-keyword">const</span> modifiedRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>(actualUrlStr, &#123;<br>      <span class="hljs-attr">headers</span>: newHeaders,<br>      <span class="hljs-attr">method</span>: request.<span class="hljs-property">method</span>,<br>      <span class="hljs-attr">body</span>: request.<span class="hljs-property">body</span>,<br>      <span class="hljs-attr">redirect</span>: <span class="hljs-string">&quot;manual&quot;</span>,<br>    &#125;);<br><br>    <span class="hljs-comment">// 发起对目标 URL 的请求</span><br>    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(modifiedRequest);<br>    <span class="hljs-keyword">let</span> body = response.<span class="hljs-property">body</span>;<br><br>    <span class="hljs-comment">// 处理重定向</span><br>    <span class="hljs-keyword">if</span> ([<span class="hljs-number">301</span>, <span class="hljs-number">302</span>, <span class="hljs-number">303</span>, <span class="hljs-number">307</span>, <span class="hljs-number">308</span>].<span class="hljs-title function_">includes</span>(response.<span class="hljs-property">status</span>)) &#123;<br>      body = response.<span class="hljs-property">body</span>;<br>      <span class="hljs-comment">// 创建新的 Response 对象以修改 Location 头部</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">handleRedirect</span>(response, body);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;Content-Type&quot;</span>)?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;text/html&quot;</span>)) &#123;<br>      body = <span class="hljs-keyword">await</span> <span class="hljs-title function_">handleHtmlContent</span>(<br>        response,<br>        url.<span class="hljs-property">protocol</span>,<br>        url.<span class="hljs-property">host</span>,<br>        actualUrlStr<br>      );<br>    &#125;<br><br>    <span class="hljs-comment">// 创建修改后的响应对象</span><br>    <span class="hljs-keyword">const</span> modifiedResponse = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(body, &#123;<br>      <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,<br>      <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,<br>      <span class="hljs-attr">headers</span>: response.<span class="hljs-property">headers</span>,<br>    &#125;);<br><br>    <span class="hljs-comment">// 添加禁用缓存的头部</span><br>    <span class="hljs-title function_">setNoCacheHeaders</span>(modifiedResponse.<span class="hljs-property">headers</span>);<br><br>    <span class="hljs-comment">// 添加 CORS 头部，允许跨域访问</span><br>    <span class="hljs-title function_">setCorsHeaders</span>(modifiedResponse.<span class="hljs-property">headers</span>);<br><br>    <span class="hljs-keyword">return</span> modifiedResponse;<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-comment">// 如果请求目标地址时出现错误，返回带有错误消息的响应和状态码 500（服务器错误）</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">jsonResponse</span>(<br>      &#123;<br>        <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>,<br>      &#125;,<br>      <span class="hljs-number">500</span><br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// 确保 URL 带有协议</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ensureProtocol</span>(<span class="hljs-params">url, defaultProtocol</span>) &#123;<br>  <span class="hljs-keyword">return</span> url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;http://&quot;</span>) || url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;https://&quot;</span>)<br>    ? url<br>    : defaultProtocol + <span class="hljs-string">&quot;//&quot;</span> + url;<br>&#125;<br><br><span class="hljs-comment">// 处理重定向</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRedirect</span>(<span class="hljs-params">response, body</span>) &#123;<br>  <span class="hljs-keyword">const</span> location = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;location&quot;</span>));<br>  <span class="hljs-keyword">const</span> modifiedLocation = <span class="hljs-string">`/<span class="hljs-subst">$&#123;<span class="hljs-built_in">encodeURIComponent</span>(location.toString())&#125;</span>`</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(body, &#123;<br>    <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,<br>    <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,<br>    <span class="hljs-attr">headers</span>: &#123;<br>      ...response.<span class="hljs-property">headers</span>,<br>      <span class="hljs-title class_">Location</span>: modifiedLocation,<br>    &#125;,<br>  &#125;);<br>&#125;<br><br><span class="hljs-comment">// 处理 HTML 内容中的相对路径</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleHtmlContent</span>(<span class="hljs-params">response, protocol, host, actualUrlStr</span>) &#123;<br>  <span class="hljs-keyword">const</span> originalText = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();<br>  <span class="hljs-keyword">const</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;((href|src|action)=[\&quot;&#x27;])/(?!/)&quot;</span>, <span class="hljs-string">&quot;g&quot;</span>);<br>  <span class="hljs-keyword">let</span> modifiedText = <span class="hljs-title function_">replaceRelativePaths</span>(<br>    originalText,<br>    protocol,<br>    host,<br>    <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(actualUrlStr).<span class="hljs-property">origin</span><br>  );<br><br>  <span class="hljs-keyword">return</span> modifiedText;<br>&#125;<br><br><span class="hljs-comment">// 替换 HTML 内容中的相对路径</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">replaceRelativePaths</span>(<span class="hljs-params">text, protocol, host, origin</span>) &#123;<br>  <span class="hljs-keyword">const</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;((href|src|action)=[\&quot;&#x27;])/(?!/)&quot;</span>, <span class="hljs-string">&quot;g&quot;</span>);<br>  <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">replace</span>(regex, <span class="hljs-string">`$1<span class="hljs-subst">$&#123;protocol&#125;</span>//<span class="hljs-subst">$&#123;host&#125;</span>/<span class="hljs-subst">$&#123;origin&#125;</span>/`</span>);<br>&#125;<br><br><span class="hljs-comment">// 返回 JSON 格式的响应</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">jsonResponse</span>(<span class="hljs-params">data, status</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data), &#123;<br>    <span class="hljs-attr">status</span>: status,<br>    <span class="hljs-attr">headers</span>: &#123;<br>      <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json; charset=utf-8&quot;</span>,<br>    &#125;,<br>  &#125;);<br>&#125;<br><br><span class="hljs-comment">// 过滤请求头</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">filterHeaders</span>(<span class="hljs-params">headers, filterFunc</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>([...headers].<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">[name]</span>) =&gt;</span> <span class="hljs-title function_">filterFunc</span>(name)));<br>&#125;<br><br><span class="hljs-comment">// 设置禁用缓存的头部</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">setNoCacheHeaders</span>(<span class="hljs-params">headers</span>) &#123;<br>  headers.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;Cache-Control&quot;</span>, <span class="hljs-string">&quot;no-store&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// 设置 CORS 头部</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">setCorsHeaders</span>(<span class="hljs-params">headers</span>) &#123;<br>  headers.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="hljs-string">&quot;*&quot;</span>);<br>  headers.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="hljs-string">&quot;GET, POST, PUT, DELETE&quot;</span>);<br>  headers.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="hljs-string">&quot;*&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// 返回根目录的 HTML</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getRootHtml</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;!DOCTYPE html&gt;</span><br><span class="hljs-string">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="hljs-string">&lt;head&gt;</span><br><span class="hljs-string">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="hljs-string">  &lt;link href=&quot;https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="hljs-string">  &lt;title&gt;Proxy Everything&lt;/title&gt;</span><br><span class="hljs-string">  &lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; href=&quot;https://img.icons8.com/color/1000/kawaii-bread-1.png&quot;&gt;</span><br><span class="hljs-string">  &lt;meta name=&quot;Description&quot; content=&quot;Proxy Everything with CF Workers.&quot;&gt;</span><br><span class="hljs-string">  &lt;meta property=&quot;og:description&quot; content=&quot;Proxy Everything with CF Workers.&quot;&gt;</span><br><span class="hljs-string">  &lt;meta property=&quot;og:image&quot; content=&quot;https://img.icons8.com/color/1000/kawaii-bread-1.png&quot;&gt;</span><br><span class="hljs-string">  &lt;meta name=&quot;robots&quot; content=&quot;index, follow&quot;&gt;</span><br><span class="hljs-string">  &lt;meta http-equiv=&quot;Content-Language&quot; content=&quot;zh-CN&quot;&gt;</span><br><span class="hljs-string">  &lt;meta name=&quot;copyright&quot; content=&quot;Copyright © ymyuuu&quot;&gt;</span><br><span class="hljs-string">  &lt;meta name=&quot;author&quot; content=&quot;ymyuuu&quot;&gt;</span><br><span class="hljs-string">  &lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;120x120&quot; href=&quot;https://img.icons8.com/color/1000/kawaii-bread-1.png&quot;&gt;</span><br><span class="hljs-string">  &lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;&gt;</span><br><span class="hljs-string">  &lt;meta name=&quot;apple-mobile-web-app-status-bar-style&quot; content=&quot;black-translucent&quot;&gt;</span><br><span class="hljs-string">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no&quot;&gt;</span><br><span class="hljs-string">  &lt;style&gt;</span><br><span class="hljs-string">      body, html &#123;</span><br><span class="hljs-string">          height: 100%;</span><br><span class="hljs-string">          margin: 0;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">      .background &#123;</span><br><span class="hljs-string">          background-image: url(&#x27;https://imgapi.cn/bing.php&#x27;);</span><br><span class="hljs-string">          background-size: cover;</span><br><span class="hljs-string">          background-position: center;</span><br><span class="hljs-string">          height: 100%;</span><br><span class="hljs-string">          display: flex;</span><br><span class="hljs-string">          align-items: center;</span><br><span class="hljs-string">          justify-content: center;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">      .card &#123;</span><br><span class="hljs-string">          background-color: rgba(255, 255, 255, 0.8);</span><br><span class="hljs-string">          transition: background-color 0.3s ease, box-shadow 0.3s ease;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">      .card:hover &#123;</span><br><span class="hljs-string">          background-color: rgba(255, 255, 255, 1);</span><br><span class="hljs-string">          box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.3);</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">      .input-field input[type=text] &#123;</span><br><span class="hljs-string">          color: #2c3e50;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">      .input-field input[type=text]:focus+label &#123;</span><br><span class="hljs-string">          color: #2c3e50 !important;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">      .input-field input[type=text]:focus &#123;</span><br><span class="hljs-string">          border-bottom: 1px solid #2c3e50 !important;</span><br><span class="hljs-string">          box-shadow: 0 1px 0 0 #2c3e50 !important;</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">  &lt;/style&gt;</span><br><span class="hljs-string">&lt;/head&gt;</span><br><span class="hljs-string">&lt;body&gt;</span><br><span class="hljs-string">  &lt;div class=&quot;background&quot;&gt;</span><br><span class="hljs-string">      &lt;div class=&quot;container&quot;&gt;</span><br><span class="hljs-string">          &lt;div class=&quot;row&quot;&gt;</span><br><span class="hljs-string">              &lt;div class=&quot;col s12 m8 offset-m2 l6 offset-l3&quot;&gt;</span><br><span class="hljs-string">                  &lt;div class=&quot;card&quot;&gt;</span><br><span class="hljs-string">                      &lt;div class=&quot;card-content&quot;&gt;</span><br><span class="hljs-string">                          &lt;span class=&quot;card-title center-align&quot;&gt;&lt;i class=&quot;material-icons left&quot;&gt;link&lt;/i&gt;Proxy Everything&lt;/span&gt;</span><br><span class="hljs-string">                          &lt;form id=&quot;urlForm&quot; onsubmit=&quot;redirectToProxy(event)&quot;&gt;</span><br><span class="hljs-string">                              &lt;div class=&quot;input-field&quot;&gt;</span><br><span class="hljs-string">                                  &lt;input type=&quot;text&quot; id=&quot;targetUrl&quot; placeholder=&quot;在此输入目标地址&quot; required&gt;</span><br><span class="hljs-string">                                  &lt;label for=&quot;targetUrl&quot;&gt;目标地址&lt;/label&gt;</span><br><span class="hljs-string">                              &lt;/div&gt;</span><br><span class="hljs-string">                              &lt;button type=&quot;submit&quot; class=&quot;btn waves-effect waves-light teal darken-2 full-width&quot;&gt;跳转&lt;/button&gt;</span><br><span class="hljs-string">                          &lt;/form&gt;</span><br><span class="hljs-string">                      &lt;/div&gt;</span><br><span class="hljs-string">                  &lt;/div&gt;</span><br><span class="hljs-string">              &lt;/div&gt;</span><br><span class="hljs-string">          &lt;/div&gt;</span><br><span class="hljs-string">      &lt;/div&gt;</span><br><span class="hljs-string">  &lt;/div&gt;</span><br><span class="hljs-string">  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="hljs-string">  &lt;script&gt;</span><br><span class="hljs-string">      function redirectToProxy(event) &#123;</span><br><span class="hljs-string">          event.preventDefault();</span><br><span class="hljs-string">          const targetUrl = document.getElementById(&#x27;targetUrl&#x27;).value.trim();</span><br><span class="hljs-string">          const currentOrigin = window.location.origin;</span><br><span class="hljs-string">          window.open(currentOrigin + &#x27;/&#x27; + encodeURIComponent(targetUrl), &#x27;_blank&#x27;);</span><br><span class="hljs-string">      &#125;</span><br><span class="hljs-string">  &lt;/script&gt;</span><br><span class="hljs-string">&lt;/body&gt;</span><br><span class="hljs-string">&lt;/html&gt;`</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>2、cloudflare 给的子域名有 dns 污染，在墙内无法访问，所以需要添加自己的自定义域名，在 workers 设置中添加自定义域名即可。</p><p>原作者 GitHub 地址：<a href="https://github.com/ymyuuu/Cloudflare-Workers-Proxy">ymyuuu</a></p>]]></content>
    
    
    <categories>
      
      <category>Cloudflare</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cloudflare</tag>
      
      <tag>网络</tag>
      
      <tag>白嫖</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>racknerd</title>
    <link href="/2024/11/25/racknerd/"/>
    <url>/2024/11/25/racknerd/</url>
    
    <content type="html"><![CDATA[<h1 id="racknerd-使用体验"><a href="#racknerd-使用体验" class="headerlink" title="racknerd 使用体验"></a>racknerd 使用体验</h1><p>前些天突然想弄个 VPS，就找了一下，刚好看见 racknerd 有万圣节活动，一年 10 刀，每月 3T 流量，1G 内存，20G SSD，买！！！</p><p>第一次使用 VPS 所以买个便宜的玩玩，经过测试买的圣何塞的服务器，跑了个 hysteria2 节点，经过这些天的实际使用体验整体感觉还行，偶尔高峰期会网速变慢，但大多时候很流畅，测速基本跑满，鉴于我自己租房的垃圾宽带只有不到 3M&#x2F;s，我又用流量跑了一遍，能到 8-9M&#x2F;s</p><p>总体感觉，一分钱一分货，这价格还要什么自行车，刷刷网页，看看视频，够用。</p><p>其实我个人是不太用得上 VPS，纯粹是就是想玩玩，不过买了也不能浪费，跑了几个 DEPIN 项目挂着，希望能空投回个血。。。</p><p>PS：为了挂项目，已经买了 11 刀的住宅 IP 流量了。。。等待后期如果能拿到空投，再来写后续</p><hr><p>2025&#x2F;10&#x2F;17更新：服务器马上要到期了，这一年拿到了两个项目的空投：nodepay和bless，加起来算600U左右吧，成本就是服务器+ip代理总计54U左右，赚还是赚的，除了这两个还有其他一堆杂七杂八的depin项目，目前没有一点消息</p>]]></content>
    
    
    <categories>
      
      <category>VPS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VPS</tag>
      
      <tag>racknerd</tag>
      
      <tag>RackNerd</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>站到用时方恨少</title>
    <link href="/2024/09/30/website-records/"/>
    <url>/2024/09/30/website-records/</url>
    
    <content type="html"><![CDATA[<h1 id="站到用时方恨少"><a href="#站到用时方恨少" class="headerlink" title="站到用时方恨少"></a>站到用时方恨少</h1><br /><h2 id="壁纸站"><a href="#壁纸站" class="headerlink" title="壁纸站"></a>壁纸站</h2><ol><li><a href="https://wallhaven.cc/">wallhaven</a>：究极好用壁纸站，无需登录，需要科学上网，推荐</li><li><a href="https://www.bizhihui.com/tags/4Kbizhi/">壁纸汇</a>：很好用的壁纸站，无需登录，需科学上网，推荐</li><li><a href="https://wallpaperswide.com/">wallpaperswide</a>：很好用的壁纸站，无需登录，无需科学，推荐</li><li><a href="https://haowallpaper.com/">哲风壁纸</a>：布局是真好看，但是需要登录，不登陆每天只能下载两张，无需科学</li></ol><br /><h2 id="技术相关"><a href="#技术相关" class="headerlink" title="技术相关"></a>技术相关</h2><ol><li><a href="https://npmmirror.com/">阿里 npm 镜像站</a>:：npm 镜像站，npmjs 上不去的时候可以使用</li><li><a href="https://github.com/DaoCloud/public-image-mirror/">docker 同步到国内</a>：github 仓库，国内无法使用国外源的情况下，可以在这个仓库提 issue，仓库会自动同步镜像到国内，然后使用国内地址拉镜像</li></ol><br /><h2 id="工具站"><a href="#工具站" class="headerlink" title="工具站"></a>工具站</h2><ol><li><a href="https://www.appinn.com/">小众软件</a>：包含各个系统或浏览器插件的各种小软件，有点意思</li><li><a href="https://squoosh.app/">squoosh</a>：图片压缩，专业的</li><li><a href="https://hexo.io/zh-cn/">Hexo</a>：博客搭建工具，配合 github pages 或者 cloudflare 可以免费建站</li><li><a href="https://hexo.fluid-dev.com/docs/guide/">Fluid</a>: Hexo 主题</li></ol><br /><h2 id="白嫖"><a href="#白嫖" class="headerlink" title="白嫖"></a>白嫖</h2><ol><li><a href="https://dash.cloudflare.com/">cloudflare</a>：赛博活佛，相当于免费送你一个小型服务器还是可以翻墙的那种，无敌</li><li><a href="https://www.oracle.com/cn/cloud/free/">甲骨文云</a>：必须要 visa 卡或者 MasterCard 卡，可以永久白嫖 8 核 GPU，24G 内存，200G SSD，并且可以拆分为多台机器，只要总配置不超过就行。唯一的问题是：注册是个玄学，到目前为止我还没注册成功，有很多人也是开始注册不成功，后来某一天突然就成功了。</li></ol>]]></content>
    
    
    <categories>
      
      <category>网站</category>
      
    </categories>
    
    
    <tags>
      
      <tag>壁纸，小众网站，站到用时方恨少</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
